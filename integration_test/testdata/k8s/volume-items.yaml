apiVersion: v1
kind: ConfigMap
metadata:
  name: my-cfg
data:
  key-a: |
    Data for Key A
  key-b: |
    Data for Key B
---
kind: Secret
apiVersion: v1
metadata:
  name: my-tls
type: Opaque
data:
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURKRENDQWd5Z0F3SUJBZ0lSQU9lWkozYit2MmM5YkV5YUxRRk1ySXd3RFFZSktvWklodmNOQVFFTEJRQXcKSERFYU1CZ0dBMVVFQXhNUllXZGxiblF0YVc1cVpXTjBiM0l0WTJFd0hoY05NalF3TkRBeU1EVTBOVFV5V2hjTgpNalV3TkRBeU1EVTBOVFV5V2pBY01Sb3dHQVlEVlFRREV4RmhaMlZ1ZEMxcGJtcGxZM1J2Y2kxallUQ0NBU0l3CkRRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFOVSt2dkR3QVpQYmJlTlZxU2tTcHFrSGR6ek4KeER6alNPSlRuN3FLVTVlTTZlQmpVNmhrdlczalp3dkFQa1FaMU1IN0VTVjNGYWw3OFhEOHVDemlEMmxJMUw5Sgpxc1F4QmZ6TjlXQ1ZRK2pkd2xDdG1lL3ZCNndqNFBZbEhmQzdlWTlidjB4bzI3a0hjS2czcnRHM1VYTlVPOU0vClBWbHNHSFMxWDZNZ0ZDUmt3b0lSMlhrR08rbU5pMHUxaTBtU000b2d5enNwbTRzNmdSc09kQnMzTVArVURqODgKcmZFZ0RRRzA1cUc1RTR0UGVpem1qdWtQaWo2ZzZ2dHV4OTJDZ3M2RkNRbzF3YlpkRm8xZzFDRjJQT25LZ0RIOQpsaDM5SUxKVUk0ZVNKUUtSY01RY09jaEVWQ2R3L1kvaEVPYmpXeVlGbVBZTDVoVEQ0VmlXKzZxd1ptOENBd0VBCkFhTmhNRjh3RGdZRFZSMFBBUUgvQkFRREFnS2tNQjBHQTFVZEpRUVdNQlFHQ0NzR0FRVUZCd01CQmdnckJnRUYKQlFjREFqQVBCZ05WSFJNQkFmOEVCVEFEQVFIL01CMEdBMVVkRGdRV0JCVHg0eWgwdWhpbEJrU09ad0FmeWwrQQp3elM3enpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQXEvOVFST2NOU0kvTDBzdGVjam81cmFNWUo3dFpPZ2FYClV1WkxiUllwejZJVE1sUkRuSG5VUkxwczMxUVBwc2RUY1lZbk85bExrMGRGdVI2MnMveU5WTndFVE90OTlENnkKc241aXJ5S2EvSTllb1hmYmdlWDhVb1g2L0JWZUhRRnMwTU5aMUVEeTUraEpoWWFRNEF5MXp1MjdoQUVjSlU3VQpGSWZjd2NWNWNoOHpCZEM3MUM1MzMxTzNvUy96UmhDUnVhNUU5NjhNSGgvTUVtbEtXdU03VjV6b2daZWJpWTVUCmtrY2g5VFd0M094VUlVR2xPSmg2YUd6NWZaTW5lVHgrT2dJMUdKWVJJMmZ3N3FUZU1SM0NGMm1EOFVJNUlEQk4KMGoyMlorYkcwaCtRdklXYXppRWRZZ29FY3FjVzRaQVpRK1lOOENINEIrVmw5amZqeGJpYVZ3PT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURaekNDQWsrZ0F3SUJBZ0lSQU1FaUJBVXJqOHlld2JZOVA5Z1FSbXN3RFFZSktvWklodmNOQVFFTEJRQXcKSERFYU1CZ0dBMVVFQXhNUllXZGxiblF0YVc1cVpXTjBiM0l0WTJFd0hoY05NalF3TkRBeU1EVTBOVFV5V2hjTgpNalV3TkRBeU1EVTBOVFV5V2pBWk1SY3dGUVlEVlFRREV3NWhaMlZ1ZEMxcGJtcGxZM1J2Y2pDQ0FTSXdEUVlKCktvWklodmNOQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQVBBN1h2dXpEeFd6REdNSHl3NjVXdmZMeXJSWHlYVngKRDdlaHNJMDl4VnhsL2lPSzNDNlVkRzFXUXIvbXZQdUdFNWlsakJtN3FnZnZDeHdpR1NIREtJMWhBL2oxOUdRdwpWUllCNUFTTFk2YnFYRHBjVGZ0YzZtWFJBdlFMVHFRL3NmTHA0YlFNWFY0QStMMWNvM1RLQlM4c0Z3WEdlTjVaCkEybnByb0VOR0ZHOTZMQWJZN1RKTlFLbUkrRW1ETWJkeW1NTHd6dnhkdHdjOHpSTzZSdDVienhJRFB1cEFGM2oKR2lHNGR5ZlRkdm5XVlp2UElPNDEvZWJQV2NPK3djNXhta1hMblRvWUdSc2gyRnh4dm93UTltU2t2NDRFeUZCZApQT2RoMi9qQVpYam82bkN4SWFkVXg3ZG1HNlV3Qjk3TG9Ib3ZVZEZVKzJqenlaclpsRXVlMlowQ0F3RUFBYU9CCnBqQ0JvekFPQmdOVkhROEJBZjhFQkFNQ0JhQXdIUVlEVlIwbEJCWXdGQVlJS3dZQkJRVUhBd0VHQ0NzR0FRVUYKQndNQ01Bd0dBMVVkRXdFQi93UUNNQUF3SHdZRFZSMGpCQmd3Rm9BVThlTW9kTG9ZcFFaRWptY0FIOHBmZ01NMAp1ODh3UXdZRFZSMFJCRHd3T29JWllXZGxiblF0YVc1cVpXTjBiM0l1WVcxaVlYTnpZV1J2Y29JZFlXZGxiblF0CmFXNXFaV04wYjNJdVlXMWlZWE56WVdSdmNpNXpkbU13RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUovd0drVkEKOHAzc2tWSzNqZlFnUWxERlpRWDd1NytJOHVaNTFDMGp3Zk1ocFJPbEhLS3o4ZFliUkRCUlN4SVp1dy9zYVJEQgpxdk1ZbWMwK2JONnN6MXhZd2Z6aDNYKy8zM3FLellwU281TXpWYzdmOENqc1FKOGpZL3FISlhYY0owUlNBWFd3CnVZdURYZVg2VFBWRlg4ODRGbS9MUTdpdHh1OFJOdlE2UjBMcTdPVGRIK1VJMzFSb3pZUjI2cFh6VisxdnQzMjEKZUNEY1RpSysyZHpCanNKcTFORjBjTUwwVkY4V0hxMjhkb29QTU5tdUJvck1HWHJCb2lvWnNIWmhueG5uRnI5UgpNTGJFbjJVMHVwbmZ5NU9jQUZoVlBBR01JTUhDRnhmSjVFQTRub2lmSGIyNWY4MGk1VHZNUFNYbWRRelE0NHlsCkR5blM4Zmg5a25LdlREOD0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBOER0ZSs3TVBGYk1NWXdmTERybGE5OHZLdEZmSmRYRVB0Nkd3alQzRlhHWCtJNHJjCkxwUjBiVlpDdithOCs0WVRtS1dNR2J1cUIrOExIQ0laSWNNb2pXRUQrUFgwWkRCVkZnSGtCSXRqcHVwY09seE4KKzF6cVpkRUM5QXRPcEQreDh1bmh0QXhkWGdENHZWeWpkTW9GTHl3WEJjWjQzbGtEYWVtdWdRMFlVYjNvc0J0agp0TWsxQXFZajRTWU14dDNLWXd2RE8vRjIzQnp6TkU3cEczbHZQRWdNKzZrQVhlTWFJYmgzSjlOMitkWlZtODhnCjdqWDk1czladzc3QnpuR2FSY3VkT2hnWkd5SFlYSEcrakJEMlpLUy9qZ1RJVUYwODUySGIrTUJsZU9qcWNMRWgKcDFUSHQyWWJwVEFIM3N1Z2VpOVIwVlQ3YVBQSm10bVVTNTdablFJREFRQUJBb0lCQUIvUFhNWnJjV1hvTFkyMwpiSFhvcVZrQ2pUYlFJUWNDRDVpN09rdVprRmFwMHJzV0dnMjQ3cW5Ec0ZjRTBLVmxuWmFxNVNCTEx6cVp0cGpsCkV2cmJnclVsMFliWDJxS2htOEtzUVdzd29lTnFTUWdaVE9JcDdZZko0MkE1VnhKOHRLMTd0cjFHbmQ1aXRvMHMKaFNCajE4ZmxTSzhsRnNBcWZUODdDRFppYTRQM0pmT21ZYk9XY1g0dUUyTmo2TzdtZVE1ajZKa1R2dU55M0N5NApjOW5OM09LWjVZcTdZeE1vNmRWSVRSVk00VUVzSGdqQmxESmZmeW9sWUt6THlJL1BPWlQxWXlvMVBCNkFRZmxRCjF6ejViREsyRTA1RlZVd2lCb2NqVEFvYSs2Zk9uOE1XdkQ3T3A1aUhZbHJ2c0Y5ZU1OTGxPejN3Qks1eGV6YS8KVGxSbG5Xa0NnWUVBL3ErYVNoY2NqY1dVMkxYQndZOVdUZmVDVGsrN0RUYTc2b2lFUzJFcVMrN0dZdmZ4ODd5aApueGhuNXhGeEVrWDJWbXhjKytWZWMvWUxWYmxSTzZYWFJmSThhd3BzVFZjZlg5VXhpWWFad3N2SDBFL09OeXRMCjNtTUVvbVk0Z2p6MzBLbzZ2WDk5cDRWZVhxcEdKalQ0ZEN5QTVQY2orSU1nTzF6aGlzdWJTWE1DZ1lFQThYaXQKVDEyWXJmSTFwblU0bjl1UTdXRVF4ZVo2dkVUN0YrZkdsbGhnd2l6cVltM2pJTHVSN1ZBcllkZm5tVFg4N2h2UApkRVhNT1htd0t1cWRDYTVja3hqRVdlZXQrQ1FyREhRTlJpTUJTUkd2dlg3NTNuTkRORnRkVHVPUSt3djNmRUViCnVtMUJxdDUxS0IxQUNxTVZFZlVlL2lKZXQ4Y0dFYzRINzI1UXpLOENnWUVBeFdDRjdFRjVDWTVFU3FhaG9FWmIKbGxUcEVaUE0zUEs4TTRqVkxpNEJQNU91LytnMEJMYjljblRSb1V2dEcwSkpKTFVhWXNWaHEvRFUyL3lncmQ5YQp0SVNFdWxmN2t2eWYvZjhWUXdXamlFbXhjd2xHUVk4Mlh3VFNCS0cvelg4K2R1SldYNkc4V2VXTU8wVXUxRkZjCjgzdkI4TEJ2bWhyVkVleHJoc3RBYjIwQ2dZQnRha0VkdFV0NWhrYkpKbFNDR3Z1UWxHc0ZRV3BiNU9YaDd5UU0KKy83Yi9YNDNHNVBQUVM3ZVdYVk80SVlRNW1XMWZ1U0J5eDYrN0dUbkRXZ2ErdWIzd0VFNGU4SllyZ3JUbWNKcQpCWEtQcVhQNGFaRFBPMnM0VGkzNWtTUWduVXVIQWZtT2YvTkJlWXVjb2FSakxZSmVvTE5xZENoM0hiZWlXYmsrCnhMM1lBUUtCZ0VxVXdieUh3MkNIalFiOGZFNFhHWVpXQmYwTjlFcjFTektjd3JqR0p1b0pqdnk1N2RUSkFZOEsKSFQ2ZUhWYlIxQ25zRktOY3RKMVhCbmUrMVh6VHpkOWpoWGxBWnVlRTZEWG5Sd3J6MC9hbDF3MzUwbDFMeW9hRQpCVmMyN1d6SFNCNCtna1BkTkdITkxtRURoU3pSckw2WmVTKzgyTXQzUGRDeGFnYTgyRTRkCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
---
apiVersion: v1
kind: Service
metadata:
  name: hello
spec:
  type: ClusterIP
  selector:
    app: hello
  ports:
    - name: http
      port: 80
      targetPort: http
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: hello
  labels:
    app: hello
spec:
  replicas: 1
  selector:
    matchLabels:
      app: hello
  template:
    metadata:
      labels:
        app: hello
    spec:
      volumes:
        - name: my-cfg
          configMap:
            name: my-cfg
            items:
              - key: key-a
                path: a
              - key: key-b
                path: b
        - name: my-crt
          secret:
            secretName: my-tls
            items:
              - key: ca.crt
                path: crt
      containers:
        - name: hello-container
          image: jmalloc/echo-server
          ports:
            - containerPort: 8080
              name: http
          volumeMounts:
            - mountPath: "/etc/cfg"
              name: my-cfg
            - mountPath: "/etc/tls/crt"
              name: my-crt
